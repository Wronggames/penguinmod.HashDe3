(function(ext) {
  // Define custom hashing block
  ext.customHash = function(input) {
    let hashedResult = '';
    for (let i = 0; i < input.length; i++) {
      const letter = input.charAt(i).toUpperCase(); // Convert input to uppercase
      switch (letter) {
        case 'A':
          hashedResult += '1';
          break;
        case 'B':
          hashedResult += 'W';
          break;
        case 'C':
          hashedResult += '#';
          break;
        case 'D':
          hashedResult += 'U';
          break;
        case 'E':
          hashedResult += 'T';
          break;
        case 'F':
          hashedResult += 'S';
          break;
        case 'G':
          hashedResult += 'R';
          break;
        case 'H':
          hashedResult += 'Q';
          break;
        case 'I':
          hashedResult += 'P';
          break;
        case 'J':
          hashedResult += 'O';
          break;
        case 'K':
          hashedResult += 'N';
          break;
        case 'L':
          hashedResult += 'M';
          break;
        case 'M':
          hashedResult += 'L';
          break;
        case 'N':
          hashedResult += '!';
          break;
        case 'O':
          hashedResult += 'J';
          break;
        case 'P':
          hashedResult += 'I';
          break;
        case 'Q':
          hashedResult += 'H';
          break;
        case 'R':
          hashedResult += 'D';
          break;
        case 'S':
          hashedResult += 'F';
          break;
        case 'T':
          hashedResult += 'R';
          break;
        case 'U':
          hashedResult += '3';
          break;
        case 'V':
          hashedResult += '{';
          break;
        case 'W':
          hashedResult += '}';
          break;
        case 'X':
          hashedResult += '4';
          break;
        case 'Y':
          hashedResult += 'Z';
          break;
        case 'Z':
          hashedResult += '3';
          break;
        default:
          hashedResult += letter; // If not a letter, keep it unchanged
          break;
      }
    }
    return hashedResult;
  };

  // Define block to return hashed input to original message
  ext.reverseHash = function(input) {
    let originalMessage = '';
    for (let i = 0; i < input.length; i++) {
      const character = input.charAt(i);
      switch (character) {
        case '1':
          originalMessage += 'A';
          break;
        case 'W':
          originalMessage += 'B';
          break;
        case '#':
          originalMessage += 'C';
          break;
        case 'U':
          originalMessage += 'D';
          break;
        case 'T':
          originalMessage += 'E';
          break;
        case 'S':
          originalMessage += 'F';
          break;
        case 'R':
          originalMessage += 'G';
          break;
        case 'Q':
          originalMessage += 'H';
          break;
        case 'P':
          originalMessage += 'I';
          break;
        case 'O':
          originalMessage += 'J';
          break;
        case 'N':
          originalMessage += 'K';
          break;
        case 'M':
          originalMessage += 'L';
          break;
        case '!':
          originalMessage += 'N';
          break;
        case 'J':
          originalMessage += 'O';
          break;
        case 'I':
          originalMessage += 'P';
          break;
        case 'H':
          originalMessage += 'Q';
          break;
        case 'D':
          originalMessage += 'R';
          break;
        case 'F':
          originalMessage += 'S';
          break;
        case 'R':
          originalMessage += 'T';
          break;
        case '3':
          originalMessage += 'U';
          break;
        case '{':
          originalMessage += 'V';
          break;
        case '}':
          originalMessage += 'W';
          break;
        case '4':
          originalMessage += 'X';
          break;
        case 'Z':
          originalMessage += 'Y';
          break;
        case '3':
          originalMessage += 'Z';
          break;
        default:
          originalMessage += character; // If not a hashed character, keep it unchanged
          break;
      }
    }
    return originalMessage;
  };

  // Describe your extension
  var descriptor = {
    blocks: [
      ['r', 'Hash In DE3 %s', 'customHash', ''],
      ['r', 'Reverse Hash %s', 'reverseHash', '']
    ],
  };

  // Register the extension
  ScratchExtensions.register('Custom Hash Extension', descriptor, ext);
})(this);
